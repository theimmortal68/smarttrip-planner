generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model activities {
  id                     Int       @id @default(autoincrement())
  name                   String    @db.VarChar(255)
  description            String?   @db.Text
  category               String?   @db.VarChar(255)
  default_duration_hours Decimal?  @db.Decimal(5, 2)
  created_at             DateTime? @default(dbgenerated("(now())")) @db.Timestamp(0)
}

model cost_items {
  id         Int       @id @default(autoincrement())
  trip_id    Int
  label      String    @db.VarChar(255)
  amount     Decimal   @db.Decimal(10, 2)
  paid_by    Int
  created_at DateTime? @default(dbgenerated("(now())")) @db.Timestamp(0)
  trips      trips     @relation(fields: [trip_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "cost_items_ibfk_1")
  users      users     @relation(fields: [paid_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "cost_items_ibfk_2")

  @@index([paid_by], map: "cost_items_index_10")
  @@index([trip_id], map: "cost_items_index_9")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model invites {
  id          Int       @id @default(autoincrement())
  trip_id     Int
  email       String    @db.VarChar(255)
  role        String    @db.VarChar(255)
  token       String    @unique(map: "token") @db.VarChar(255)
  expires_at  DateTime  @db.Timestamp(0)
  accepted_at DateTime? @db.Timestamp(0)
  created_at  DateTime? @default(dbgenerated("(now())")) @db.Timestamp(0)
  trips       trips     @relation(fields: [trip_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "invites_ibfk_1")

  @@index([trip_id], map: "invites_index_7")
  @@index([token], map: "invites_index_8")
}

model itinerary_items {
  id                                      Int       @id @default(autoincrement())
  trip_id                                 Int
  day_index                               Int?
  title                                   String    @db.VarChar(255)
  description                             String?   @db.Text
  start_time                              DateTime? @db.Time(0)
  end_time                                DateTime? @db.Time(0)
  duration_hours                          Decimal?  @db.Decimal(5, 2)
  location_name                           String?   @db.VarChar(255)
  google_place_id                         String?   @db.VarChar(255)
  activity_type                           String?   @db.VarChar(255)
  participants_json                       Json?
  equipment_list                          Json?
  food_plan                               String?   @db.Text
  transport_mode                          String?   @db.VarChar(255)
  notes                                   String?   @db.Text
  sort_order                              Int?
  created_by                              Int?
  created_at                              DateTime? @default(dbgenerated("(now())")) @db.Timestamp(0)
  updated_by                              Int?
  updated_at                              DateTime? @db.Timestamp(0)
  trips                                   trips     @relation(fields: [trip_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "itinerary_items_ibfk_1")
  users_itinerary_items_created_byTousers users?    @relation("itinerary_items_created_byTousers", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "itinerary_items_ibfk_2")
  users_itinerary_items_updated_byTousers users?    @relation("itinerary_items_updated_byTousers", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "itinerary_items_ibfk_3")

  @@unique([user_id, trip_id], map: "user_id_trip_id")
  @@index([trip_id], map: "itinerary_items_index_3")
  @@index([created_by], map: "itinerary_items_index_4")
  @@index([trip_id, day_index], map: "itinerary_items_index_5")
  @@index([updated_by], map: "updated_by")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model trip_members {
  id        Int       @id @default(autoincrement())
  user_id   Int
  trip_id   Int
  role      String    @db.VarChar(255)
  joined_at DateTime? @default(dbgenerated("(now())")) @db.Timestamp(0)
  users     users     @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "trip_members_ibfk_1")
  trips     trips     @relation(fields: [trip_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "trip_members_ibfk_2")

  @@unique([user_id, trip_id], map: "trip_members_index_2")
  @@index([trip_id], map: "trip_id")
}

model trips {
  id              Int               @id @default(autoincrement())
  creator_id      Int
  location        String?           @db.VarChar(255)
  start_date      DateTime?         @db.Date
  end_date        DateTime?         @db.Date
  notes           String?           @db.Text
  created_at      DateTime?         @default(dbgenerated("(now())")) @db.Timestamp(0)
  updated_at      DateTime?         @db.Timestamp(0)
  cost_items      cost_items[]
  invites         invites[]
  itinerary_items itinerary_items[]
  trip_members    trip_members[]
  users           users             @relation(fields: [creator_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "trips_ibfk_1")

  @@index([creator_id], map: "trips_index_0")
  @@index([start_date, end_date], map: "trips_index_1")
}

model users {
  id                                                Int               @id @default(autoincrement())
  name                                              String?           @db.VarChar(255)
  email                                             String            @unique(map: "email") @db.VarChar(255)
  password_hash                                     String            @db.VarChar(255)
  created_at                                        DateTime?         @default(dbgenerated("(now())")) @db.Timestamp(0)
  cost_items                                        cost_items[]
  itinerary_items_itinerary_items_created_byTousers itinerary_items[] @relation("itinerary_items_created_byTousers")
  itinerary_items_itinerary_items_updated_byTousers itinerary_items[] @relation("itinerary_items_updated_byTousers")
  trip_members                                      trip_members[]
  trips                                             trips[]
}
